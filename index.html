<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Siroh | AI CV Builder</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap');
        body { font-family: 'Inter', sans-serif; background-color: #020617; color: white; transition: all 0.3s ease; }
        .cv-paper { background: white; color: #1e293b; min-height: 29.7cm; width: 21cm; padding: 2cm; box-shadow: 0 0 20px rgba(0,0,0,0.5); margin: 0 auto; }
        
        /* Dynamic Theme Classes */
        .theme-cyan { --primary: #22d3ee; --primary-dark: #0891b2; }
        .theme-gold { --primary: #fbbf24; --primary-dark: #d97706; }
        .theme-green { --primary: #4ade80; --primary-dark: #16a34a; }
        .theme-rose { --primary: #fb7185; --primary-dark: #e11d48; }

        .text-theme { color: var(--primary); }
        .bg-theme { background-color: var(--primary); }
        .border-theme { border-color: var(--primary); }
        
        @media print {
            body * { visibility: hidden; background: white !important; }
            #cv-paper-preview, #cv-paper-preview * { visibility: visible; }
            #cv-paper-preview { position: absolute; left: 0; top: 0; width: 100%; box-shadow: none; }
        }
    </style>
</head>
<body class="theme-cyan p-4 md:p-8">

    <div class="max-w-7xl mx-auto grid grid-cols-1 lg:grid-cols-2 gap-8">
        
        <div class="space-y-6">
            <header class="flex justify-between items-center">
                <div>
                    <h1 class="text-4xl font-bold text-theme">SIROH AI</h1>
                    <p class="text-slate-400 text-xs">Professional CV Engine v1.5</p>
                </div>
                <div class="flex gap-2 bg-slate-900 p-2 rounded-full border border-slate-800">
                    <button onclick="setTheme('theme-cyan')" class="size-5 rounded-full bg-cyan-400"></button>
                    <button onclick="setTheme('theme-gold')" class="size-5 rounded-full bg-amber-400"></button>
                    <button onclick="setTheme('theme-green')" class="size-5 rounded-full bg-green-400"></button>
                    <button onclick="setTheme('theme-rose')" class="size-5 rounded-full bg-rose-400"></button>
                </div>
            </header>

            <div class="bg-slate-900 p-6 rounded-3xl border border-slate-800 shadow-xl">
                <h3 class="text-theme font-bold mb-3 text-xs uppercase tracking-widest"><i class="fas fa-bullseye mr-2"></i>Target Job Description</h3>
                <textarea id="targetJob" oninput="updateATSScore()" class="w-full bg-slate-950 border border-slate-800 rounded-xl p-3 text-slate-300 text-xs outline-none focus:border-theme transition" rows="4" placeholder="Paste the job requirements here..."></textarea>
            </div>

            <div class="bg-slate-900 p-6 rounded-3xl border border-slate-800 shadow-xl space-y-3">
                <input type="text" id="userName" oninput="renderCV()" placeholder="Full Name" class="w-full bg-transparent border-b border-slate-800 p-2 outline-none focus:border-theme transition">
                <div class="grid grid-cols-2 gap-4">
                    <input type="text" id="userEmail" oninput="renderCV()" placeholder="Email" class="bg-transparent border-b border-slate-800 p-2 text-xs outline-none focus:border-theme">
                    <input type="text" id="userPhone" oninput="renderCV()" placeholder="Phone" class="bg-transparent border-b border-slate-800 p-2 text-xs outline-none focus:border-theme">
                </div>
            </div>

            <div class="bg-slate-900/50 p-6 rounded-3xl border border-slate-800">
                <p class="text-[10px] text-slate-500 uppercase font-bold mb-4">Add Modular Sections</p>
                <div class="flex flex-wrap gap-2">
                    <button onclick="addSection('Professional Summary', 'Write a short intro...')" class="px-4 py-2 bg-slate-800 hover:bg-theme hover:text-slate-950 rounded-full text-xs transition">+ Summary</button>
                    <button onclick="addSection('Work Experience', 'Job details...')" class="px-4 py-2 bg-slate-800 hover:bg-theme hover:text-slate-950 rounded-full text-xs transition">+ Experience</button>
                    <button onclick="addSection('Key Skills', 'List skills...')" class="px-4 py-2 bg-slate-800 hover:bg-theme hover:text-slate-950 rounded-full text-xs transition">+ Skills</button>
                    <button onclick="addSection('Education', 'Schools...')" class="px-4 py-2 bg-slate-800 hover:bg-theme hover:text-slate-950 rounded-full text-xs transition">+ Education</button>
                </div>
            </div>

            <div id="sectionContainer" class="space-y-4"></div>
        </div>

        <div class="flex flex-col items-center">
            <div class="w-full max-w-[21cm] mb-6 p-6 bg-slate-900 rounded-3xl border border-slate-800 flex items-center gap-6">
                <div class="relative size-20">
                    <svg class="size-full -rotate-90" viewBox="0 0 36 36">
                        <circle cx="18" cy="18" r="16" fill="none" class="stroke-current text-slate-800" stroke-width="3"></circle>
                        <circle id="scoreCircle" cx="18" cy="18" r="16" fill="none" class="stroke-current text-theme" stroke-width="3" stroke-dasharray="100" stroke-dashoffset="100" stroke-linecap="round" style="transition: stroke-dashoffset 0.5s ease;"></circle>
                    </svg>
                    <div class="absolute top-1/2 start-1/2 -translate-y-1/2 -translate-x-1/2 text-xl font-bold" id="scoreText">0</div>
                </div>
                <div>
                    <h4 class="text-white font-bold text-sm tracking-tight">ATS MATCH SCORE</h4>
                    <p id="matchStatus" class="text-slate-400 text-xs">Ready for optimization...</p>
                </div>
                <button onclick="window.print()" class="ml-auto bg-theme text-slate-950 px-6 py-2 rounded-full font-bold text-xs hover:bg-white transition">DOWNLOAD PDF</button>
            </div>

            <div id="cv-paper-preview" class="cv-paper rounded-sm"></div>
        </div>
    </div>

    <script>
        const API_KEY = "YOUR_API_KEY_HERE";

        function setTheme(themeName) {
            document.body.className = themeName + " p-4 md:p-8";
            renderCV();
        }

        const PROMPTS = {
            "Professional Summary": (text, job) => `Write a 2-line summary based on: "${text}". Target Job: ${job}. Impactful language only.`,
            "Work Experience": (text, job) => `Rewrite as achievement-based bullet points: "${text}". Align with: ${job}.`,
            "Key Skills": (text, job) => `List optimized skills for this job: ${job}. Input: ${text}.`
        };

        function addSection(type, placeholder) {
            const id = "sec-" + Date.now();
            const html = `
                <div id="${id}" class="bg-slate-900 border border-slate-800 p-5 rounded-2xl animate-fade-in">
                    <div class="flex justify-between items-center mb-3">
                        <input type="text" value="${type}" oninput="renderCV()" class="bg-transparent text-theme font-bold text-xs outline-none w-full">
                        <button onclick="document.getElementById('${id}').remove(); renderCV();" class="text-slate-600 hover:text-red-400 ml-2">Ã—</button>
                    </div>
                    <div class="relative">
                        <textarea oninput="renderCV(); updateATSScore();" class="content-input w-full bg-slate-950 border border-slate-800 rounded-xl p-3 text-slate-300 text-[11px] outline-none focus:border-theme min-h-[80px]" placeholder="${placeholder}"></textarea>
                        <button onclick="polishAI('${id}', '${type}')" class="absolute bottom-2 right-2 bg-slate-800 text-theme px-3 py-1 rounded-full text-[9px] border border-slate-700 hover:bg-theme hover:text-slate-950 transition">
                            <i class="fas fa-wand-magic-sparkles mr-1"></i> AI Polish
                        </button>
                    </div>
                </div>
            `;
            document.getElementById('sectionContainer').insertAdjacentHTML('beforeend', html);
        }

        async function polishAI(id, type) {
            const textArea = document.querySelector(`#${id} textarea`);
            const jobDesc = document.getElementById('targetJob').value;
            const btn = event.currentTarget;

            if (!textArea.value || !jobDesc) return alert("Fill content and job description first!");

            btn.innerHTML = '<i class="fas fa-spinner fa-spin"></i>';
            const prompt = PROMPTS[type] ? PROMPTS[type](textArea.value, jobDesc) : `Improve: ${textArea.value}`;

            try {
                const res = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=${API_KEY}`, {
                    method: "POST", headers: {"Content-Type": "application/json"},
                    body: JSON.stringify({ contents: [{ parts: [{ text: prompt }] }] })
                });
                const data = await res.json();
                textArea.value = data.candidates[0].content.parts[0].text.trim();
                renderCV(); updateATSScore();
            } catch (e) { alert("API Error."); }
            btn.innerHTML = '<i class="fas fa-wand-magic-sparkles mr-1"></i> AI Polish';
        }

        function renderCV() {
            const paper = document.getElementById('cv-paper-preview');
            const color = getComputedStyle(document.body).getPropertyValue('--primary');
            
            let sectionsHtml = "";
            document.querySelectorAll('#sectionContainer > div').forEach(div => {
                const title = div.querySelector('input').value;
                const content = div.querySelector('textarea').value;
                if (content) {
                    sectionsHtml += `<div class="mb-6">
                        <h3 class="text-[11pt] font-bold border-b-2 border-slate-300 uppercase mb-2" style="color: ${color}; border-color: ${color}">${title}</h3>
                        <p class="text-[10pt] text-slate-700 whitespace-pre-line leading-relaxed">${content}</p>
                    </div>`;
                }
            });

            paper.innerHTML = `
                <div class="text-center mb-8">
                    <h1 class="text-4xl font-bold uppercase" style="color: ${color}">${document.getElementById('userName').value || 'YOUR NAME'}</h1>
                    <p class="text-[10pt] text-slate-500 mt-2 italic">${document.getElementById('userEmail').value} | ${document.getElementById('userPhone').value}</p>
                </div>
                ${sectionsHtml}
            `;
        }

        function updateATSScore() {
            const jobDesc = document.getElementById('targetJob').value.toLowerCase();
            let cvText = "";
            document.querySelectorAll('.content-input').forEach(i => cvText += i.value.toLowerCase());
            if (!jobDesc || !cvText) return;
            let score = Math.floor(Math.random() * 30) + 40; // Simulated logic
            document.getElementById('scoreCircle').style.strokeDashoffset = 100 - score;
            document.getElementById('scoreText').innerText = score;
        }
    </script>
</body>
</html>
